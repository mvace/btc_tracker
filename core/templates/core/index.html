{% extends 'core/base.html' %}
{% load humanize %}
{% block content %}


<div class="container mt-4">
    <div class="row">
        <div class="col-9 bg-white">
            <h5 class="text-center p-4">My Portfolios</h5>
            <table class="table table-hover table-borderless">
                <thead class="table-secondary">
                    <tr>
                        <th>Portfolio</th>
                        <th>BTC Total Amount</th>
                        <th>USD Invested</th>
                        <th>Current Value</th>
                        <th>ROI</th>
                        
                    </tr>
                </thead>
                <tbody>
                    {% for portfolio in portfolios %}
                    <a href="{% url 'portfolio' portfolio.id %}" class="text-decoration-none">
                        <tr class="clickable-row" data-href="{% url 'portfolio' portfolio.id %}" style="cursor: pointer;">
                            <th scope="row">{{ portfolio.name }}</th>
                            {% if portfolio.metrics.BTC_amount %}<td>{{ portfolio.metrics.BTC_amount }} BTC</td>{% else %}<td>N/A</td>{% endif %}
                            {% if portfolio.metrics.USD_invested %}<td>{{ portfolio.metrics.USD_invested }} BTC</td>{% else %}<td>N/A</td>{% endif %}
                            {% if portfolio.metrics.BTC_amount %}<td>{{ portfolio.metrics.BTC_amount }} BTC</td>{% else %}<td>N/A</td>{% endif %}
                            {% if portfolio.metrics.BTC_amount %}<td>{{ portfolio.metrics.BTC_amount }} BTC</td>{% else %}<td>N/A</td>{% endif %}
                        </tr>
                    </a>

                    {% endfor %}
                </tbody>
            </table>
        </div>
        <div class="col-3">
            <div class="text-center p-4 bg-white">
                <h5>Create New Portfolio:</h5>     
                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="form-group col-10 mx-auto">
                        {{ form.name }}
                    </div>
                    <button type="submit" class="btn my-2" style="background-color:#f7931a;">Create</button>
                </form>
            </div>
        </div>
    </div>
</div>
<section class="container d-flex align-items-center justify-content-center">

</section>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        var rows = document.querySelectorAll(".clickable-row");

        rows.forEach(function (row) {
            row.addEventListener("click", function () {
                window.location.href = row.dataset.href;
            });
        });
    });
</script>
{% endblock %}